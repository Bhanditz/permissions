<!DOCTYPE html>
<html>
  <head>
    <title>
      The Permissions API
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src='https://www.w3.org/Tools/respec/respec-w3c-common' class=
    'remove'>
</script>
    <script class='remove'>
// (this is to make tidy happy)
    var respecConfig = {
        specStatus:           "unofficial",
        shortName:            "permissions",

        //publishDate:          "2014-04-03",
        //previousPublishDate:  "2014-02-20",
        //previousMaturity:     "WD",
        edDraftURI:           "https://w3c.github.io/permissions/",

        // if this is a LCWD, uncomment and set the end of its review period
        // lcEnd: "20015-08-05",
        noIDLIn:       true,
        noLegacyStyle: true,

        editors:  [
            {
              name: "Mounir Lamouri",
              company: "Google Inc.",
              companyURL: "http://google.com/",
            }
        ],

        otherLinks: [{
            key: 'Participate',
            data: [{
                      value: 'We are on Github.',
                      href: 'https://github.com/w3c/permissions'
                  }, {
                      value: 'File a bug.',
                      href: 'https://github.com/w3c/permissions/issues'
                  }, {
                      value: 'Commit history.',
                      href: 'https://github.com/w3c/permissions/commits/gh-pages'
                  }, {
                      value: 'Mailing list.',
                      href: 'http://lists.w3.org/Archives/Public/public-webapps/'
            }]
        }],

        wg:           "Web Applications Working Group",
        wgURI:        "http://www.w3.org/2008/webapps/",
        wgPublicList: "public-webapps",
        wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/42538/status",
      };
    </script>
  </head>
  <body>
    <section id='abstract'>
      The <cite>Permissions API</cite> allows a web application to be aware of
      the status of a given permission, to know whether it is granted, denied
      or if the user will be asked whether the permission should be granted.
    </section>
    <section id='conformance'>
      <p>
        This specification defines conformance criteria that apply to a single
        product: the <dfn>user agent</dfn> that implements the interfaces that
        it contains.
      </p>
      <p>
        Implementations that use ECMAScript to expose the APIs defined in this
        specification MUST implement them in a manner consistent with the
        ECMAScript Bindings defined in the Web IDL specification [[!WEBIDL]].
      </p>
    </section>
    <section>
      <h2>
        Dependencies
      </h2>
      <p>
        <a href=
        'https://html.spec.whatwg.org/multipage/browsers.html#effective-script-origin'>
        <dfn>effective script origin</dfn></a> is defined in [[!HTML]].
      </p>
      <p>
        <a href=
        'http://people.mozilla.org/~jorendorff/es6-draft.html#sec-promise-objects'>
        <dfn>Promise</dfn> objects</a> are defined in [[!ECMASCRIPT]].
      </p>
    </section>
    <section>
      <h2>
        Concepts
      </h2>
      <section>
        <h2>
          Permission definition
        </h2>
        <dl class='idl' title='dictionary Permission'>
          <dt>
            required DOMString <a>name</a>
          </dt>
        </dl>
        <p>
          A <code>Permission</code> dictionary MUST contain a <code><dfn
          id='widl-Permission-name'>name</dfn></code> field which represents the
          permission's identifier.
        </p>
        <p>
          If another specification wants to define a new permission, it MUST
          specify a new name and make sure it does not collide with another. It
          is recommended to use a permission name that is related to the W3C
          specification short name given that it is unique and related to the
          specification.
        </p>
        <p>
          If a permission has to be defined by more than its name, it is
          RECOMMENDED to inherit from <code>Permission</code> dictionary and
          add new fields.
        </p>
        <div class='issue'>
          Create an extensibility section?
        </div>
        <div class='issue'>
          Have a registry of permissions in this document?
        </div>
      </section>
      <!--
        geolocation
        notifications
        push
        quota api (filesystem)
        registerProtocolHandler
        getusermedia
      -->
      <section>
        <h2>
          Status of a permission
        </h2>
        <p>
          The status of a permission depends
        </p>
        <dl class='idl' title='enum PermissionState'>
          <dt>granted</dt>
          <dt>denied</dt>
          <dt>prompt</dt>
        </dl>
        <p>
          A permission is <code><dfn id='widl-PermissionState-granted'>
          granted</dfn></code> if when trying to use the feature related to the
          permission, the call MUST succeed.
        </p>
        <p>
          A permission is <code><dfn id='widl-PermissionState-denied'>denied</dfn></code>
          if when trying to use the feature related to the permission, the call
          SHOULD fail and the user SHOULD not be prompted in order to grant the
          permission. However, the <a>user agent</a> MAY show a prompt to the
          user
        </p>

        <dl class='idl' title='interface PermissionStatus : EventTarget'>
          <dt>
            readonly attribute DOMString name
          </dt>
          <dt>
            readonly attribute PermissionState status
          </dt>
          <dt>
            attribute EventHandler onchange
          </dt>
        </dl>
        <p>
          A <code>PermissionStatus</code> dictionary MUST contain a <code><dfn
          id='widl-PermissionStatus-status'>status</dfn></code> field which MUST
          be a <code>PermissionState</code> type.
        </p>
        <p>
          If another specification wants to define a new permission, for which
          the status is going to be defined by more than a <code>PermissionState</code>,
          it is RECOMMENDED to inherit from <code>PermissionStatus</code>
          dictionary and add new fields.
        </p>
      </section>
      <section>
        <h2>
          Permissions interface
        </h2>

        <dl class='idl' title='[Exposed=(Window,Worker)] interface Permissions'>
          <dt>
            static Promise&lt;PermissionStatus&gt; get(Permission permission)
          </dt>
        </dl>
      </section>
    </section>
    <section class='appendix'>
      <h2>
        Acknowledgments
      </h2>
      <p>
        <div class='issue'>
          Add acknowledgments.
        </div>
      </p>
    </section>
  </body>
</html>
